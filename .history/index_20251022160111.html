<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>BizCore360</title>

<!-- Bootstrap / Icons / Font -->
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
<link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.css" rel="stylesheet">
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap" rel="stylesheet">

<!-- Local CSS -->
<link rel="stylesheet" href="assets/css/styles.css">

<style>
/* your entire CSS unchanged — shortened for readability */
:root{--sidebar-w:260px;}
/* ... all your existing styles remain the same ... */
</style>
<link rel="stylesheet" href="assets/css/style.css">
</head>

<body>

<!-- LOGIN PAGE -->
<!-- ... all your existing login + dashboard HTML content stays exactly the same ... -->
<!-- (from <div id="loginPage"> to the end of your dashboard markup) -->

<!-- BOOTSTRAP + JS -->
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
<script src="js/scripts.js"></script>
<script src="config.js"></script>

<!-- Your main BizCore360 JS Engine -->
<script>
/* === All your long BizCore360 JS engine remains here exactly as before === */
/* (no changes above this point) */
</script>

<div class="position-fixed bottom-0 end-0 p-3" style="z-index:1100">
  <div id="toastNewFolder" class="toast align-items-center text-bg-success border-0" role="alert">
    <div class="d-flex">
      <div class="toast-body">New folder created!</div>
      <button type="button" class="btn-close btn-close-white me-2 m-auto" data-bs-dismiss="toast"></button>
    </div>
  </div>
</div>

<!-- ✅ UNIVERSAL PAGE LOADER + ACTIVE LINK HIGHLIGHT -->
<script>
document.addEventListener("DOMContentLoaded", () => {
  const content = document.querySelector("#main-content");

  // Handle all [data-page] clicks globally (sidebar, avatar dropdown, topbar)
  document.body.addEventListener("click", async (e) => {
    const link = e.target.closest("[data-page]");
    if (!link || !content) return;

    e.preventDefault();
    const page = link.getAttribute("data-page");
    if (!page) return;

    // --- ACTIVE LINK HIGHLIGHT ---
    document.querySelectorAll("[data-page]").forEach(el => el.classList.remove("active", "text-primary"));
    link.classList.add("active", "text-primary");

    try {
      const response = await fetch(`pages/${page}`);
      if (!response.ok) throw new Error(`Failed to load ${page}`);
      const html = await response.text();

      // Inject HTML content
      content.innerHTML = html;

      // Execute inline <script> blocks from loaded pages
      const parser = new DOMParser();
      const doc = parser.parseFromString(html, "text/html");
      const scripts = doc.querySelectorAll("script");
      scripts.forEach(script => {
        if (script.textContent.trim()) {
          const s = document.createElement("script");
          s.textContent = script.textContent;
          document.body.appendChild(s);
          document.body.removeChild(s);
        }
      });

      console.log(`✅ Loaded: ${page}`);
    } catch (err) {
      console.error("❌ Page load error:", err);
      content.innerHTML = `
        <div class="alert alert-danger m-3">
          <i class="bi bi-exclamation-triangle me-2"></i>
          Error loading <strong>${page}</strong>. Please check the file path.
        </div>`;
    }
  });
});
</script>
</body>
</html>

<!-- forced-sync: 2025-10-22 -->
